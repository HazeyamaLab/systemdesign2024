# 情報システム設計 Webアプリケーション開発課題 開発環境

このリポジトリは、情報システム設計（東京学芸大学 教育学部 情報教育教室開設科目）のWebアプリケーション開発課題に用いる開発環境のテンプレートです。

本授業では、受講生のみなさんに開発環境を構築していただき、その開発環境を用いて開発と実演を行なっていただきます。
開発環境の構築方法については[docs/setup/index.md](docs/setup/index.md)をご覧ください。

## 開発環境の使い方

この開発環境は開発コンテナーとして構築されています。
開発環境の構築方法および開発コンテナーへの接続方法については[docs/setup/index.md](docs/setup/index.md)をご覧ください。

### 開発コンテナーに含まれているもの

開発コンテナーは次の3つのコンテナーから構成されています。
  - `devcontainer`：Java開発キット等のWebアプリの開発に必要なツールがインストールされていて、ソースコードの読み書きもできるメインのコンテナーです。ソースコードの編集、開発したアプリケーションのビルドや起動等の作業のほとんどは、VSCodeを通してこのコンテナー上で行うことになります。
  - `mysql`：MySQLがインストールされているコンテナーです。`devcontainer`と`mysql`の間は通信できるようになっているので、開発したアプリケーションをテスト・実演する際は、このコンテナー上のデータベースを読み書きすることになります。
  - `adminer`：MySQLのWebUIを提供するAdminerがインストールされているコンテナーです。`adminer`と`mysql`の間は通信できるようになっていて、WebUIで`mysql`コンテナー上のデータベースを読み書きすることができます。

### 開発したアプリケーションを起動する

#### ターミナルから直接起動する場合

VSCodeのターミナルで次のコマンドを実行します。

```sh
./gradlew build && ./gradlew bootRun
```

手元のコンピュータのブラウザでテストや実演を行う場合は、開発コンテナー上の`localhost:8080`を手元のコンピュータの`localhost:8080`に転送し、ブラウザで http://localhost:8080 にアクセスしてください。

アプリケーションを停止する際は、ターミナルで`Ctrl+C`（macOSは`^C`）を入力します。

#### VSCodeのデバッグ機能を使って起動する場合

1. `Ctrl+Shift+P`（macOSは`⇧⌘P`）でコマンドパレットを開き、`Debug: Start Debugging`と入力して`Enter`キーを押します（途中まで入力して同名の項目を選択しても構いません）。
2. 開発したアプリケーションがビルド・実行されます。ビルドに成功すると、画面下部のステータスバーの色が変わり、デバッグモードに入ります。

手元のコンピュータのブラウザでテストや実演を行う場合は、開発コンテナー上の`localhost:8080`を手元のコンピュータの`localhost:8080`に転送し、ブラウザで http://localhost:8080 にアクセスしてください。

この方法で起動した場合は、コードにブレークポイントを設定して、ブレークポイント設定箇所の実行が開始されたタイミングからステップ実行させることができます。

アプリケーションを停止する際は、デバッグを画面上部のツールバーの`Stop`（`停止`）ボタンをクリックします。
`Restart`（`再起動`）ボタンをクリックすると、停止、ビルド、起動までを1クリックで行うことができます。コードの変更を反映する際にお使いください。

### データベース管理システムをCLIで操作する

`devcontainer`コンテナーにはMySQLクライアントがインストールされています。VSCodeのターミナルで`mysql`コンテナー上のデータベースを操作することができます。

```sh
mysql -h mysql -u mysql -p db
```

ユーザー`mysql`のパスワードは`password`に設定されています。

### データベース管理システムをAdminerで操作する

開発コンテナー上の`adminer:8080`を手元のコンピュータの`localhost:8081`に転送し、ブラウザで http://localhost:8081 にアクセスしてください。

データベースへのログイン情報は次のように設定されています。

- `サーバ`: `mysql`
- `ユーザ名`: `mysql`
- `パスワード`: `password`
- `データベース`: `database`

### データベース管理システムを手元のPCにインストールされているツールで操作する

開発コンテナー上の`mysql:3306`を手元のコンピュータのポート（例えば`localhost:3306`）に転送し、お使いのツールで転送先のアドレス・ポートにログインしてください。

データベースへのログイン情報は次のように設定されています。

- `サーバ`: 転送先のアドレス・ポートをお使いください。
- `ユーザ名`: `mysql`
- `パスワード`: `password`
- `データベース`: `database`


## お問い合わせ先

この開発環境のテンプレートに関する質問やお問い合わせの際は、`e215413x[at]st.u-gakugei.ac.jp`に大学メールまたはTeamsチャットでご連絡ください。（特定電子メールの送信の適正化等に関する法律に基づく表記：このメールアドレスへの特定電子メールの送信を拒否いたします。）

学外の方からの質問やお問い合わせにはお答えできません。
